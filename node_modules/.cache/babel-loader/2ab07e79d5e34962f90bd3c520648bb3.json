{"ast":null,"code":"import _classCallCheck from \"/Users/marinatells/Coding/promweb/lesson14/vue-vuetify-router-axios/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/marinatells/Coding/promweb/lesson14/vue-vuetify-router-axios/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/marinatells/Coding/promweb/lesson14/vue-vuetify-router-axios/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/marinatells/Coding/promweb/lesson14/vue-vuetify-router-axios/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/es.array.concat.js\";\n// Extensions\nimport { Service } from '../service'; // Utilities\n\nimport { getObjectValueByPath } from '../../util/helpers';\nimport { consoleError, consoleWarn } from '../../util/console';\nvar LANG_PREFIX = '$vuetify.';\nvar fallback = Symbol('Lang fallback');\n\nfunction getTranslation(locale, key) {\n  var usingDefault = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var defaultLocale = arguments.length > 3 ? arguments[3] : undefined;\n  var shortKey = key.replace(LANG_PREFIX, '');\n  var translation = getObjectValueByPath(locale, shortKey, fallback);\n\n  if (translation === fallback) {\n    if (usingDefault) {\n      consoleError(\"Translation key \\\"\".concat(shortKey, \"\\\" not found in fallback\"));\n      translation = key;\n    } else {\n      consoleWarn(\"Translation key \\\"\".concat(shortKey, \"\\\" not found, falling back to default\"));\n      translation = getTranslation(defaultLocale, key, true, defaultLocale);\n    }\n  }\n\n  return translation;\n}\n\nexport var Lang = /*#__PURE__*/function (_Service) {\n  _inherits(Lang, _Service);\n\n  var _super = _createSuper(Lang);\n\n  function Lang(preset) {\n    var _this;\n\n    _classCallCheck(this, Lang);\n\n    _this = _super.call(this);\n    _this.defaultLocale = 'en';\n    var _preset$Lang$property = preset[Lang.property],\n        current = _preset$Lang$property.current,\n        locales = _preset$Lang$property.locales,\n        t = _preset$Lang$property.t;\n    _this.current = current;\n    _this.locales = locales;\n    _this.translator = t || _this.defaultTranslator;\n    return _this;\n  }\n\n  _createClass(Lang, [{\n    key: \"currentLocale\",\n    value: function currentLocale(key) {\n      var translation = this.locales[this.current];\n      var defaultLocale = this.locales[this.defaultLocale];\n      return getTranslation(translation, key, false, defaultLocale);\n    }\n  }, {\n    key: \"t\",\n    value: function t(key) {\n      for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        params[_key - 1] = arguments[_key];\n      }\n\n      if (!key.startsWith(LANG_PREFIX)) return this.replace(key, params);\n      return this.translator.apply(this, [key].concat(params));\n    }\n  }, {\n    key: \"defaultTranslator\",\n    value: function defaultTranslator(key) {\n      for (var _len2 = arguments.length, params = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        params[_key2 - 1] = arguments[_key2];\n      }\n\n      return this.replace(this.currentLocale(key), params);\n    }\n  }, {\n    key: \"replace\",\n    value: function replace(str, params) {\n      return str.replace(/\\{(\\d+)\\}/g, function (match, index) {\n        /* istanbul ignore next */\n        return String(params[+index]);\n      });\n    }\n  }]);\n\n  return Lang;\n}(Service);\nLang.property = 'lang';","map":{"version":3,"sources":["../../../src/services/lang/index.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA,SAAA,OAAA,QAAA,YAAA,C,CAEA;;AACA,SAAA,oBAAA,QAAA,oBAAA;AACA,SAAA,YAAA,EAAA,WAAA,QAAA,oBAAA;AASA,IAAM,WAAW,GAAjB,WAAA;AACA,IAAM,QAAQ,GAAG,MAAM,CAAvB,eAAuB,CAAvB;;AAEA,SAAA,cAAA,CAAA,MAAA,EAAA,GAAA,EAI8B;AAAA,MAD5B,YAC4B,uEAJ9B,KAI8B;AAAA,MAJ9B,aAI8B;AAE5B,MAAM,QAAQ,GAAG,GAAG,CAAH,OAAA,CAAA,WAAA,EAAjB,EAAiB,CAAjB;AACA,MAAI,WAAW,GAAG,oBAAoB,CAAA,MAAA,EAAA,QAAA,EAAtC,QAAsC,CAAtC;;AAEA,MAAI,WAAW,KAAf,QAAA,EAA8B;AAC5B,QAAA,YAAA,EAAkB;AAChB,MAAA,YAAY,6BAAZ,QAAY,8BAAZ;AACA,MAAA,WAAW,GAAX,GAAA;AAFF,KAAA,MAGO;AACL,MAAA,WAAW,6BAAX,QAAW,2CAAX;AACA,MAAA,WAAW,GAAG,cAAc,CAAA,aAAA,EAAA,GAAA,EAAA,IAAA,EAA5B,aAA4B,CAA5B;AACD;AACF;;AAED,SAAA,WAAA;AACD;;AAED,WAAM,IAAN;AAAA;;AAAA;;AAWE,gBAAA,MAAA,EAAkC;AAAA;;AAAA;;AAChC;AAPK,UAAA,aAAA,GAAA,IAAA;AASL,gCAII,MAAM,CAAC,IAAI,CAJf,QAIU,CAJV;AAAA,QAAM,OAAN,yBAAM,OAAN;AAAA,QAAM,OAAN,yBAAM,OAAN;AAAA,QAGE,CAHF,yBAGE,CAHF;AAMA,UAAA,OAAA,GAAA,OAAA;AACA,UAAA,OAAA,GAAA,OAAA;AACA,UAAA,UAAA,GAAkB,CAAC,IAAI,MAAvB,iBAAA;AAXgC;AAYjC;;AAvBH;AAAA;AAAA,WAyBS,uBAAa,GAAb,EAA0B;AAC/B,UAAM,WAAW,GAAG,KAAA,OAAA,CAAa,KAAjC,OAAoB,CAApB;AACA,UAAM,aAAa,GAAG,KAAA,OAAA,CAAa,KAAnC,aAAsB,CAAtB;AAEA,aAAO,cAAc,CAAA,WAAA,EAAA,GAAA,EAAA,KAAA,EAArB,aAAqB,CAArB;AACD;AA9BH;AAAA;AAAA,WAgCS,WAAC,GAAD,EAAgC;AAAA,wCAA/B,MAA+B;AAA/B,QAAA,MAA+B;AAAA;;AACrC,UAAI,CAAC,GAAG,CAAH,UAAA,CAAL,WAAK,CAAL,EAAkC,OAAO,KAAA,OAAA,CAAA,GAAA,EAAP,MAAO,CAAP;AAElC,aAAO,KAAA,UAAA,cAAA,GAAA,SAAP,MAAO,EAAP;AACD;AApCH;AAAA;AAAA,WAsCU,2BAAiB,GAAjB,EAAgD;AAAA,yCAA/B,MAA+B;AAA/B,QAAA,MAA+B;AAAA;;AACtD,aAAO,KAAA,OAAA,CAAa,KAAA,aAAA,CAAb,GAAa,CAAb,EAAP,MAAO,CAAP;AACD;AAxCH;AAAA;AAAA,WA0CU,iBAAO,GAAP,EAAO,MAAP,EAAmC;AACzC,aAAO,GAAG,CAAH,OAAA,CAAA,YAAA,EAA0B,UAAA,KAAA,EAAA,KAAA,EAAiC;AAChE;AACA,eAAO,MAAM,CAAC,MAAM,CAAC,CAArB,KAAoB,CAAP,CAAb;AAFF,OAAO,CAAP;AAID;AA/CH;;AAAA;AAAA,EAAM,OAAN;AACS,IAAA,CAAA,QAAA,GAAA,MAAA","sourcesContent":["// Extensions\nimport { Service } from '../service'\n\n// Utilities\nimport { getObjectValueByPath } from '../../util/helpers'\nimport { consoleError, consoleWarn } from '../../util/console'\n\n// Types\nimport { VuetifyPreset } from 'vuetify/types/services/presets'\nimport {\n  VuetifyLocale,\n  Lang as ILang,\n} from 'vuetify/types/services/lang'\n\nconst LANG_PREFIX = '$vuetify.'\nconst fallback = Symbol('Lang fallback')\n\nfunction getTranslation (\n  locale: VuetifyLocale,\n  key: string,\n  usingDefault = false,\n  defaultLocale: VuetifyLocale\n): string {\n  const shortKey = key.replace(LANG_PREFIX, '')\n  let translation = getObjectValueByPath(locale, shortKey, fallback) as string | typeof fallback\n\n  if (translation === fallback) {\n    if (usingDefault) {\n      consoleError(`Translation key \"${shortKey}\" not found in fallback`)\n      translation = key\n    } else {\n      consoleWarn(`Translation key \"${shortKey}\" not found, falling back to default`)\n      translation = getTranslation(defaultLocale, key, true, defaultLocale)\n    }\n  }\n\n  return translation\n}\n\nexport class Lang extends Service implements ILang {\n  static property: 'lang' = 'lang'\n\n  public current: ILang['current']\n\n  public defaultLocale = 'en'\n\n  public locales: ILang['locales']\n\n  private translator: ILang['t']\n\n  constructor (preset: VuetifyPreset) {\n    super()\n\n    const {\n      current,\n      locales,\n      t,\n    } = preset[Lang.property]\n\n    this.current = current\n    this.locales = locales\n    this.translator = t || this.defaultTranslator\n  }\n\n  public currentLocale (key: string) {\n    const translation = this.locales[this.current]\n    const defaultLocale = this.locales[this.defaultLocale]\n\n    return getTranslation(translation, key, false, defaultLocale)\n  }\n\n  public t (key: string, ...params: any[]) {\n    if (!key.startsWith(LANG_PREFIX)) return this.replace(key, params)\n\n    return this.translator(key, ...params)\n  }\n\n  private defaultTranslator (key: string, ...params: any[]) {\n    return this.replace(this.currentLocale(key), params)\n  }\n\n  private replace (str: string, params: any[]) {\n    return str.replace(/\\{(\\d+)\\}/g, (match: string, index: string) => {\n      /* istanbul ignore next */\n      return String(params[+index])\n    })\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}